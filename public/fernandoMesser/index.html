<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Team - Spring 2023</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>To-do app</title>
    </head>

    <body>
        <table id="taskTable">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Done</th>
                    <th>Actions</th>
                </tr>
            </thead>

            <tbody id="taskTableBody"> 
                <tr>
                    <td>1</td>
                    <td>Task 1</td>
                    <td><input type="checkbox"></td>
                    <td><button>Remove</button></td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Task 2</td>
                    <td><input type="checkbox"></td>
                    <td><button>Remove</button></td>
                </tr>
            </tbody>
        </table>
        <script>
        const tableBody = document.getElementById("taskTableBody")
        
        function addRow(task){
        const row = document.createElement("tr")
        tableBody.appendChild(row)
        const idColumn = document.createElement("td")
        idColumn.innerText = task.id
        row.appendChild(idColumn)
        const nameColumn = document.createElement("td")
        nameColumn.innerText = task.name
        row.appendChild(nameColumn)
        }
        function fetchTasks(){
            console.log("Fetching Tasks")
            fetch("/api/fernandoMesser/tasks").then(function(response){
                console.log(response)
                response.json().then(function(data){
                    console.log(data)
                    for(let i = 0; i < data.length; i++){
                        const task = data[i]
                        addRow(task)
                    }
                })
            })

        }
        fetchTasks()
        </script>
    </body>

</html>
